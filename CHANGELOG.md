# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [0.0.5] - 2022-10-19

## [0.0.4] - 2021-12-02
### Added
- Support for `prompt` query parameter to '/login/federated' endpoint, which is
passed as `prompt` option to federated authentication strategy.

## [0.0.3] - 2021-11-18
### Added

- `FederatedIDService` can yield `false` to indicate that an identity obtained
via a federation protocol is not from a foreign domain.  In this case, the user
is logged in directly, rather than querying for the associated account or JIT
provisioning a new account.

## [0.0.2] - 2021-11-17
### Added

- Support for `login_hint` query parameter to '/login/federated' endpoint, which
is passed as `loginHint` option to federated authentication strategy.
- Support for dispatching to multiple actions from OAuth 2.0 redirect endpoint.
- Support for dispatching to multiple actions from OAuth callback endpoint.
- Added `authorize` action for storing tokens authorized by users.
- OAuth 2.0 redirect endpoint passes protocol from state as argument when
constructing IDPs, useful for indicating layers on top of OAuth 2.0, such as
OpenID Connect.
- Added OpenID Connect `StateStore` component at `openidconnect/http/statestore`.

### Changed

- Login action no longer resumes state, instead calls next middleware in stack
to support subsequent actions after login.
- `location`, `returnTo`, and `resumeState` are no longer passed as state properties
`authenticate()`, as they are handled automatically by state middleware.
- `location`, `returnTo`, and `resumeState` are no longer passed as options to
`IDProviderFactory` when creating IDP.
- Updated middleware to use `flowstate@0.5.x` API.
- OAuth 2.0 state store updated to use `flowstate@0.5.x` API, specifically
`req.pushState`.
- OAuth 2.0 state store errors, rather than fails, when state middleware is not
in use.
- Improved OAuth 2.0 state store failure messages for mix-up attack
countermeasures.
- OAuth request token store updated to use `flowstate@0.5.x` API, specifically
`req.pushState`.
- OAuth request token store errors, rather than fails, when state middleware is
not in use.
- Handle use to store OAuth state is generated by joining components with "_"
rather than ":".
- Moved `oauth/http/statestore` component to `oauth/http/requesttokenstore`.

### Fixed

- `repository` and `bugs` URLs in `package.json` pointed to correct GitHub
repository.


## [0.0.1] - 2021-10-21

- Initial release.

[Unreleased]: https://github.com/authnomicon/federated/compare/v0.0.5...HEAD
[0.0.5]: https://github.com/authnomicon/federated/compare/v0.0.4...v0.0.5
[0.0.4]: https://github.com/authnomicon/federated/compare/v0.0.3...v0.0.4
[0.0.3]: https://github.com/authnomicon/federated/compare/v0.0.2...v0.0.3
[0.0.2]: https://github.com/authnomicon/federated/compare/v0.0.1...v0.0.2
[0.0.1]: https://github.com/authnomicon/federated/releases/tag/v0.0.1
